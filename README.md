# AI Assistant

`ai-assistant` is a Python command-line tool that provides a suite of AI-powered utilities.

> [!TIP]
> If using [`uv`](https://docs.astral.sh/uv/), you can easily run the tools from this package directly. For example, to see the help message for `autocorrect`:
>
> ```bash
> uvx ai-assistant autocorrect --help
> ```

<details><summary><b><u>[ToC]</u></b> 📚</summary>

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Features](#features)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Usage](#usage)
  - [`autocorrect`](#autocorrect)
  - [`transcribe`](#transcribe)
  - [`voice-assistant`](#voice-assistant)
- [Development](#development)
  - [Running Tests](#running-tests)
  - [Pre-commit Hooks](#pre-commit-hooks)
- [Contributing](#contributing)
- [License](#license)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

</details>

## Features

- **`autocorrect`**: Correct grammar and spelling in your text using a local LLM with Ollama.
- **`transcribe`**: Transcribe audio files to text.
- **`voice-assistant`**: A voice-powered clipboard assistant.

## Prerequisites

- **Python**: Version 3.11 or higher.
- **Ollama**: For `autocorrect` and `voice-assistant`, you need [Ollama](https://ollama.ai/) running with a model pulled (e.g., `ollama pull devstral:24b`).

## Installation

Install `ai-assistant` using pip:

```bash
pip install ai-assistant
```

Or for development:

1. **Clone the repository:**

   ```bash
   git clone git@github.com:basnijholt/ai-assistant.git
   cd ai-assistant
   ```

2. **Install in development mode:**

   ```bash
   uv sync
   source .venv/bin/activate  # On Windows use `.venv\Scripts\activate`
   ```

## Usage

This package provides multiple command-line tools.

### `autocorrect`

Corrects text from your clipboard or direct input.

<details>
<summary>See the output of <code>ai-assistant autocorrect --help</code></summary>

<!-- CODE:BASH:START -->
<!-- echo '```yaml' -->
<!-- export NO_COLOR=1 -->
<!-- export TERM=dumb -->
<!-- ai-assistant autocorrect --help -->
<!-- echo '```' -->
<!-- CODE:END -->

<!-- OUTPUT:START -->
<!-- ⚠️ This content is auto-generated by `markdown-code-runner`. -->
```yaml
```

<!-- OUTPUT:END -->

</details>

### `transcribe`

Transcribes an audio file.

<details>
<summary>See the output of <code>ai-assistant transcribe --help</code></summary>

<!-- CODE:BASH:START -->
<!-- echo '```yaml' -->
<!-- export NO_COLOR=1 -->
<!-- export TERM=dumb -->
<!-- ai-assistant transcribe --help -->
<!-- echo '```' -->
<!-- CODE:END -->

<!-- OUTPUT:START -->
<!-- ⚠️ This content is auto-generated by `markdown-code-runner`. -->
```yaml

 Usage: ai-assistant transcribe [OPTIONS]

 Wyoming ASR Client for streaming microphone audio to a transcription server.

 Usage: - Run in foreground: ai-assistant transcribe --device-index 1 - Run in
 background: ai-assistant transcribe --device-index 1 & - Check status:
 ai-assistant transcribe --status - Kill background process: ai-assistant
 transcribe --kill

╭─ Options ────────────────────────────────────────────────────────────────────╮
│ --device-index                           INTEGER  Index of the PyAudio input │
│                                                   device to use.             │
│                                                   [default: None]            │
│ --list-devices                                    List available audio input │
│                                                   devices and exit.          │
│ --asr-server-ip                          TEXT     Wyoming ASR server IP      │
│                                                   address.                   │
│                                                   [default: 192.168.1.143]   │
│ --asr-server-port                        INTEGER  Wyoming ASR server port.   │
│                                                   [default: 10300]           │
│ --clipboard            --no-clipboard             Copy transcript to         │
│                                                   clipboard.                 │
│                                                   [default: clipboard]       │
│ --kill                                            Kill any running           │
│                                                   background process.        │
│ --status                                          Check if a background      │
│                                                   process is running.        │
│ --log-level                              TEXT     Set logging level.         │
│                                                   [default: WARNING]         │
│ --log-file                               TEXT     Path to a file to write    │
│                                                   logs to.                   │
│                                                   [default: None]            │
│ --quiet            -q                             Suppress console output    │
│                                                   from rich.                │
│ --help                                            Show this message and      │
│                                                   exit.                      │
╰──────────────────────────────────────────────────────────────────────────────╯

```

<!-- OUTPUT:END -->

</details>

### `voice-assistant`

Starts the voice assistant. Supports daemon mode with process management.

**Basic Usage:**
```bash
# Run in foreground
ai-assistant voice-assistant --device-index 1

# Run in background
ai-assistant voice-assistant --device-index 1 &

# Check status
ai-assistant voice-assistant --status

# Stop background process
ai-assistant voice-assistant --kill
```

**Keyboard Maestro Integration:**
The process management features make it perfect for hotkey toggles. Use `--status` to check if running, `--kill` to stop, and `--daemon` to start in background.

<details>
<summary>See the output of <code>ai-assistant voice-assistant --help</code></summary>

<!-- CODE:BASH:START -->
<!-- echo '```yaml' -->
<!-- export NO_COLOR=1 -->
<!-- export TERM=dumb -->
<!-- ai-assistant voice-assistant --help -->
<!-- echo '```' -->
<!-- CODE:END -->

<!-- OUTPUT:START -->
<!-- ⚠️ This content is auto-generated by `markdown-code-runner`. -->
```yaml
```

<!-- OUTPUT:END -->

</details>


## Development

### Running Tests

The project uses `pytest` for testing. To run tests using `uv`:

```bash
uv run pytest
```

### Pre-commit Hooks

This project uses pre-commit hooks (ruff for linting and formatting, mypy for type checking) to maintain code quality. To set them up:

1. Install pre-commit:

   ```bash
   pip install pre-commit
   ```

2. Install the hooks:

   ```bash
   pre-commit install
   ```

   Now, the hooks will run automatically before each commit.

## Contributing

Contributions are welcome! If you find a bug or have a feature request, please open an issue. If you'd like to contribute code, please fork the repository and submit a pull request.

## License

This project is licensed under the MIT License - see the `LICENSE` file for details.
